{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<!-- Page Title -->
<div class="mb-6">
  <h2 class="text-2xl font-bold text-gray-800">Dashboard</h2>
  <p class="text-sm text-gray-500">Quick overview and QR generation</p>
</div>

<!-- Generate QR -->
<div class="bg-white rounded-xl shadow-sm p-6 mb-6">
  <form method="POST" action="{% url 'create_qrcode' %}">
    {% csrf_token %}

    <div class="flex flex-col md:flex-row gap-3">
      <input
        type="url"
        name="url"
        required
        placeholder="Paste your long URL here..."
        class="flex-1 px-4 py-3 rounded-lg border focus:ring-2 focus:ring-indigo-500"
      >

      <button
        type="submit"
        class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
        Generate QR
      </button>
    </div>
  </form>
</div>

<!-- Latest QR Codes -->
<div class="bg-white rounded-xl shadow-sm">

  <div class="px-6 py-4 border-b">
    <h3 class="font-semibold text-gray-800">Latest QR Codes</h3>
  </div>

  <div class="overflow-x-auto">
    <table class="w-full text-sm">
      <thead class="bg-gray-50 text-gray-600">
        <tr>
          <th class="text-left px-6 py-3">URL</th>
          <th class="text-left px-6 py-3">Created</th>
          <th class="text-left px-6 py-3">Status</th>
          <th class="px-6 py-3"></th>
        </tr>
      </thead>

      <tbody class="divide-y">
        {% for qr in qr_list %}
        <tr>
          <td class="px-6 py-3 truncate max-w-xs">
            {{ qr.url }}
          </td>

          <td class="px-6 py-3">
            {{ qr.created_at|date:"M d, Y" }}
          </td>

          <td class="px-6 py-3">
            {% if qr.is_expired %}
              <span class="px-3 py-1 text-xs bg-red-100 text-red-600 rounded-full">
                Expired
              </span>
            {% else %}
              <span class="px-3 py-1 text-xs bg-green-100 text-green-600 rounded-full">
                Active
              </span>
            {% endif %}
          </td>

          <td class="px-6 py-3 text-right">
            <a href="{% url 'qrcode_detail' qr.id %}"
               class="text-indigo-600 hover:underline">
              View
            </a>
          </td>
        </tr>

        {% empty %}
        <tr>
          <td colspan="4" class="px-6 py-6 text-center text-gray-500">
            No QR codes yet
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
